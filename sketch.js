


/*

 ▄▄▄          ██▒   █▓▓█████  ██▀███ ▓██   ██▓    ███▄    █  ▒█████   ██▀███   ███▄ ▄███▓ ▄▄▄       ██▓         ██████ ▄▄▄█████▓ ▒█████   ▄████▄   ██ ▄█▀   ▓█████ ▒██   ██▒ ▄████▄   ██░ ██  ▄▄▄       ███▄    █   ▄████ ▓█████ 
▒████▄       ▓██░   █▒▓█   ▀ ▓██ ▒ ██▒▒██  ██▒    ██ ▀█   █ ▒██▒  ██▒▓██ ▒ ██▒▓██▒▀█▀ ██▒▒████▄    ▓██▒       ▒██    ▒ ▓  ██▒ ▓▒▒██▒  ██▒▒██▀ ▀█   ██▄█▒    ▓█   ▀ ▒▒ █ █ ▒░▒██▀ ▀█  ▓██░ ██▒▒████▄     ██ ▀█   █  ██▒ ▀█▒▓█   ▀ 
▒██  ▀█▄      ▓██  █▒░▒███   ▓██ ░▄█ ▒ ▒██ ██░   ▓██  ▀█ ██▒▒██░  ██▒▓██ ░▄█ ▒▓██    ▓██░▒██  ▀█▄  ▒██░       ░ ▓██▄   ▒ ▓██░ ▒░▒██░  ██▒▒▓█    ▄ ▓███▄░    ▒███   ░░  █   ░▒▓█    ▄ ▒██▀▀██░▒██  ▀█▄  ▓██  ▀█ ██▒▒██░▄▄▄░▒███   
░██▄▄▄▄██      ▒██ █░░▒▓█  ▄ ▒██▀▀█▄   ░ ▐██▓░   ▓██▒  ▐▌██▒▒██   ██░▒██▀▀█▄  ▒██    ▒██ ░██▄▄▄▄██ ▒██░         ▒   ██▒░ ▓██▓ ░ ▒██   ██░▒▓▓▄ ▄██▒▓██ █▄    ▒▓█  ▄  ░ █ █ ▒ ▒▓▓▄ ▄██▒░▓█ ░██ ░██▄▄▄▄██ ▓██▒  ▐▌██▒░▓█  ██▓▒▓█  ▄ 
 ▓█   ▓██▒      ▒▀█░  ░▒████▒░██▓ ▒██▒ ░ ██▒▓░   ▒██░   ▓██░░ ████▓▒░░██▓ ▒██▒▒██▒   ░██▒ ▓█   ▓██▒░██████▒   ▒██████▒▒  ▒██▒ ░ ░ ████▓▒░▒ ▓███▀ ░▒██▒ █▄   ░▒████▒▒██▒ ▒██▒▒ ▓███▀ ░░▓█▒░██▓ ▓█   ▓██▒▒██░   ▓██░░▒▓███▀▒░▒████▒
 ▒▒   ▓▒█░      ░ ▐░  ░░ ▒░ ░░ ▒▓ ░▒▓░  ██▒▒▒    ░ ▒░   ▒ ▒ ░ ▒░▒░▒░ ░ ▒▓ ░▒▓░░ ▒░   ░  ░ ▒▒   ▓▒█░░ ▒░▓  ░   ▒ ▒▓▒ ▒ ░  ▒ ░░   ░ ▒░▒░▒░ ░ ░▒ ▒  ░▒ ▒▒ ▓▒   ░░ ▒░ ░▒▒ ░ ░▓ ░░ ░▒ ▒  ░ ▒ ░░▒░▒ ▒▒   ▓▒█░░ ▒░   ▒ ▒  ░▒   ▒ ░░ ▒░ ░
  ▒   ▒▒ ░      ░ ░░   ░ ░  ░  ░▒ ░ ▒░▓██ ░▒░    ░ ░░   ░ ▒░  ░ ▒ ▒░   ░▒ ░ ▒░░  ░      ░  ▒   ▒▒ ░░ ░ ▒  ░   ░ ░▒  ░ ░    ░      ░ ▒ ▒░   ░  ▒   ░ ░▒ ▒░    ░ ░  ░░░   ░▒ ░  ░  ▒    ▒ ░▒░ ░  ▒   ▒▒ ░░ ░░   ░ ▒░  ░   ░  ░ ░  ░
  ░   ▒           ░░     ░     ░░   ░ ▒ ▒ ░░        ░   ░ ░ ░ ░ ░ ▒    ░░   ░ ░      ░     ░   ▒     ░ ░      ░  ░  ░    ░      ░ ░ ░ ▒  ░        ░ ░░ ░       ░    ░    ░  ░         ░  ░░ ░  ░   ▒      ░   ░ ░ ░ ░   ░    ░   
      ░  ░         ░     ░  ░   ░     ░ ░                 ░     ░ ░     ░            ░         ░  ░    ░  ░         ░               ░ ░  ░ ░      ░  ░         ░  ░ ░    ░  ░ ░       ░  ░  ░      ░  ░         ░       ░    ░  ░
                  ░                   ░ ░                                                                                                ░                                  ░                                                    
*/



let stocks = [];
let totalMoney = 1000; // starting amount of money
let selectedStockIndex = 0; //  currently selected stock for transactions
let updateInterval = 1000; // Update every 1 second

class Stock {
  constructor(name) {
    this.name = name;
    this.price = random(20, 120); // Initial price 
    this.history = []; // price history
    this.sharesOwned = 0; // Number of shares owned 
  }

  updatePrice() {
    let change = random(-5, 5); // Change by up to ±$5
    this.price = max(1, this.price + change); // price stays above $1
    this.history.push(this.price);
    if (this.history.length > 50) { //last 50 records
      this.history.shift();
    }
  }

  drawChart(x, y, w, h) {
    noFill();
    stroke(0);
    beginShape();
    for (let i = 0; i < this.history.length; i++) {
      let xPoint = map(i, 0, this.history.length - 1, x, x + w);
      let yPoint = map(this.history[i], 0, max(this.history), y + h, y);
      vertex(xPoint, yPoint);
    }
    endShape();
  }
}

function setup() {
  createCanvas(800, 600);
  let bodyParts = ["Head", "Shoulder", "Knee", "Toe", "Heart", "Lung", "Liver", "Hand", "Foot", "Eye"]; // becuase, why not?
  bodyParts.forEach(part => stocks.push(new Stock(part)));
  setInterval(updateStocks, updateInterval);

  // Buy button
  const buyButton = createButton('Buy 1 Share');
  buyButton.position(10, 550);
  buyButton.mousePressed(() => buyShares(1));

  // Sell button
  const sellButton = createButton('Sell 1 Share');
  sellButton.position(100, 550);
  sellButton.mousePressed(() => sellShares(1));
}

function draw() {
  background(220);
  drawStockCharts();
  displayInfo();
}

function updateStocks() {
  stocks.forEach(stock => stock.updatePrice());
}

function drawStockCharts() {
  let chartWidth = width / stocks.length;
  let chartHeight = 100;
  stocks.forEach((stock, i) => {
    let x = i * chartWidth;
    let y = height - chartHeight - 150; 
    stock.drawChart(x, y, chartWidth, chartHeight);
    fill(0);
    noStroke();
    textAlign(CENTER, TOP);
    text(stock.name, x + chartWidth / 2, y + chartHeight + 5);

    // Highlight selected
    if (i === selectedStockIndex) {
      stroke(255, 0, 0);
      noFill();
      rect(x, y, chartWidth, chartHeight);
    }
  });
}

function buyShares(amount) {
  let stock = stocks[selectedStockIndex];
  if (totalMoney >= stock.price * amount) {
    stock.sharesOwned += amount;
    totalMoney -= stock.price * amount;
  } else {
    console.log("Not enough money to buy shares.");
  }
}

function sellShares(amount) {
  let stock = stocks[selectedStockIndex];
  if (stock.sharesOwned >= amount) {
    stock.sharesOwned -= amount;
    totalMoney += stock.price * amount;
  } else {
    console.log("Not enough shares to sell.");
  }
}

function displayInfo() {
  fill(0);
  noStroke();
  textAlign(LEFT, TOP);
  text(`Total Money: $${totalMoney.toFixed(2)}`, 10, 10);
  let stock = stocks[selectedStockIndex];
  text(`Selected Stock: ${stock.name}`, 10, 30);
  text(`Shares Owned: ${stock.sharesOwned}`, 10, 50);
  text(`Current Price: $${stock.price.toFixed(2)}`, 10, 70);
    text(`Switch between different stocks using the Arrow keys`, 10, 90);

}

// Change the selected stock with arrow keys
function keyPressed() {
  if (keyCode === RIGHT_ARROW) {
    selectedStockIndex = (selectedStockIndex + 1) % stocks.length;
  } else if (keyCode === LEFT_ARROW) {
    selectedStockIndex = (selectedStockIndex - 1 + stocks.length) % stocks.length;
  }
}
